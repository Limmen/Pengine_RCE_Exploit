# OS
FROM ubuntu:20.04
USER root

ARG DEBIAN_FRONTEND=noninteractive

# Install dependencies
RUN apt-get update && apt-get -y install apt-utils sudo net-tools iputils-ping curl git
RUN apt-get update && apt-get -y install swi-prolog emacs netcat nmap ncat


# Add Pengine Server
ADD server.pl /server.pl
RUN chmod 777 /server.pl

ADD daemon.pl /daemon.pl
RUN chmod 777 /daemon.pl

# Create non-root user to run the server
RUN adduser --disabled-password --gecos '' pengine

# Add start script
ADD start.sh /start.sh
RUN chmod 777 /start.sh

# CMD to run when container starts
CMD ["/start.sh"]
